{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useRef, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport styles from \"./style\";\nimport { Button } from \"react-native-elements\";\nimport { auth, db } from \"../../firebase2\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport { arrayUnion, updateDoc } from \"firebase/firestore\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EscribirArticulo = function EscribirArticulo() {\n  var navigation = useNavigation();\n  var initalState = {\n    name: \"\",\n    description: \"\",\n    tags: [],\n    nickname: \"\",\n    comments: \"\"\n  };\n  var InputRef = useRef();\n\n  var _useState = useState(initalState),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var handleChangeText = function handleChangeText(value, name) {\n    if (name === \"tags\") {\n      var tags = value.split(\",\");\n      console.log(tags);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        tags: tags\n      }));\n    } else {\n      setState(_objectSpread(_objectSpread({}, state), {}, _defineProperty({}, name, value)));\n    }\n  };\n\n  var GenerateUniqueID = function GenerateUniqueID() {\n    return Math.floor(Math.random() * Date.now()).toString();\n  };\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      Comments = _useState4[0],\n      SetComments = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      commentValue = _useState6[0],\n      setCommentValue = _useState6[1];\n\n  var addToComments = function addToComments() {\n    var temp = {\n      commentValue: commentValue,\n      id: GenerateUniqueID(),\n      autor: auth.currentUser.email\n    };\n    var ref = db.collection('Articulos').doc(props.route.params.userId);\n    updateDoc(ref, {\n      comments: arrayUnion(temp)\n    }).then(function (r) {\n      console.log(r);\n    });\n    SetComments([].concat(_toConsumableArray(Comments), [temp]));\n    setCommentValue('');\n    InputRef.current.clear();\n  };\n\n  var saveNewUser = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(state.description === \"\")) {\n              _context.next = 4;\n              break;\n            }\n\n            alert(\"Por favor ingrese un descripción\");\n            _context.next = 13;\n            break;\n\n          case 4:\n            _context.prev = 4;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(db.collection(\"Articulos\").add({\n              autor: auth.currentUser.email,\n              name: state.name,\n              description: state.description,\n              tags: state.tags,\n              nickname: state.nickname\n            }));\n\n          case 7:\n            db.collection(\"Articulos\").where(\"autor\", \"==\", auth.currentUser.email).get().then(function (querySnapshot) {\n              querySnapshot.forEach(function (doc) {\n                console.log(doc.id, \" => \", doc.data());\n              });\n            });\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](4);\n            console.log(_context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[4, 10]], Promise);\n  };\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      uploading = _useState10[0],\n      setUploading = _useState10[1];\n\n  var pickImage = function _callee2() {\n    var result;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsx(KeyboardAvoidingView, {\n    style: styles.containerView,\n    behavior: \"padding\",\n    children: _jsx(View, {\n      style: styles.loginScreenContainer,\n      children: _jsxs(View, {\n        style: styles.loginFormView,\n        children: [_jsx(Text, {\n          style: styles.logoText,\n          children: \"Escribe un art\\xED\\xADculo\"\n        }), _jsx(TextInput, {\n          onChangeText: function onChangeText(value) {\n            return handleChangeText(value, \"name\");\n          },\n          placeholder: \"Titulo\",\n          placeholderColor: \"#c4c3cb\",\n          style: styles.loginFormTextInput\n        }), _jsx(TextInput, {\n          onChangeText: function onChangeText(value) {\n            return handleChangeText(value, \"nickname\");\n          },\n          placeholder: \"Tu nombre y apellido\",\n          placeholderColor: \"#c4c3cb\",\n          style: styles.loginFormTextInput\n        }), _jsx(TextInput, {\n          onChangeText: function onChangeText(value) {\n            return handleChangeText(value, \"description\");\n          },\n          placeholder: \"Escribe o pega la informaci\\xF3n aqu\\xED\",\n          placeholderColor: \"#c4c3cb\",\n          style: styles.loginFormTextInput,\n          multiline: true\n        }), _jsx(TextInput, {\n          onChangeText: function onChangeText(value) {\n            return handleChangeText(value, \"tags\");\n          },\n          placeholder: \"Tags (separados por comas)\",\n          placeholderColor: \"#c4c3cb\",\n          style: styles.loginFormTextInput\n        }), _jsx(Button, {\n          buttonStyle: {\n            backgroundColor: '#00ADC7'\n          },\n          onPress: function onPress() {\n            saveNewUser();\n            navigation.navigate(\"Search\");\n          },\n          title: \"Publicar\"\n        })]\n      })\n    })\n  });\n};\n\nexport default EscribirArticulo;","map":{"version":3,"names":["React","useRef","useState","styles","Button","auth","db","useNavigation","arrayUnion","updateDoc","EscribirArticulo","navigation","initalState","name","description","tags","nickname","comments","InputRef","state","setState","handleChangeText","value","split","console","log","GenerateUniqueID","Math","floor","random","Date","now","toString","Comments","SetComments","commentValue","setCommentValue","addToComments","temp","id","autor","currentUser","email","ref","collection","doc","props","route","params","userId","then","r","current","clear","saveNewUser","alert","add","where","get","querySnapshot","forEach","data","image","setImage","uploading","setUploading","pickImage","ImagePicker","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","result","cancelled","uri","containerView","loginScreenContainer","loginFormView","logoText","loginFormTextInput","backgroundColor","navigate"],"sources":["/Users/victorsalgado/Desktop/goodmental/src/screens/EscribirArticulo.js"],"sourcesContent":["import React, {useRef, useState} from 'react'\nimport {View, Text, TextInput, KeyboardAvoidingView} from 'react-native'\nimport styles from \"./style\";\nimport {Button} from \"react-native-elements\";\nimport {auth, db} from \"../../firebase2\";\nimport {useNavigation} from \"@react-navigation/core\";\nimport {arrayUnion, updateDoc} from \"firebase/firestore\";\nconst EscribirArticulo = () => {\n    const navigation = useNavigation();\n    const initalState = {\n        name: \"\", description: \"\", tags: [], nickname: \"\", comments: \"\",\n    };\n    const InputRef = useRef();\n    const [state, setState] = useState(initalState);\n\n    const handleChangeText = (value, name) => {\n\n        if (name === \"tags\") {\n            const tags = value.split(\",\");\n            console.log(tags);\n            setState({...state, tags});\n        } else {\n            setState({...state, [name]: value});\n        }\n    };\n    const GenerateUniqueID = () => {\n        return Math.floor(Math.random() * Date.now()).toString();\n    };\n    const [Comments, SetComments] = useState([]);\n    const [commentValue, setCommentValue] = useState('');\n    const addToComments=()=>{\n        let temp = {\n            commentValue: commentValue,\n            id: GenerateUniqueID(),\n            autor: auth.currentUser.email\n        };\n        const ref = db.collection('Articulos').doc(props.route.params.userId);\n        updateDoc(ref, {\n            comments: arrayUnion(temp)\n        }).then(r => {\n            console.log(r);\n        });\n        SetComments([...Comments, temp]); // Adds comment to Array\n        setCommentValue(''); // Clears the TextInput Field\n        InputRef.current.clear();\n    }\n\n\n\n    const saveNewUser = async () => {\n        if (state.description === \"\") {\n            alert(\"Por favor ingrese un descripción\")\n        } else {\n            try {\n                await db.collection(\"Articulos\").add({\n                    autor: auth.currentUser.email,\n                    name: state.name,\n                    description: state.description,\n                    tags: state.tags,\n                    nickname: state.nickname,\n\n                })\n\n\n                db.collection(\"Articulos\").where(\"autor\", \"==\", auth.currentUser.email).get().then(function (querySnapshot) {\n                    querySnapshot.forEach(function (doc) {\n                        console.log(doc.id, \" => \", doc.data());\n                    });\n                });\n            } catch (error) {\n                console.log(error)\n            }\n        }\n    };\n    const [image, setImage] = useState(\"\");\n    const [uploading, setUploading] = useState(false);\n    const pickImage = async () => {\n        // No permissions request is necessary for launching the image library\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\n        });\n\n\n        if (!result.cancelled) {\n            setImage(result.uri);\n        }\n    };\n    return (\n        <KeyboardAvoidingView style={styles.containerView} behavior=\"padding\">\n            <View style={styles.loginScreenContainer}>\n                <View style={styles.loginFormView}>\n                    <Text style={styles.logoText}>Escribe un artí­culo</Text>\n                    <TextInput\n                        onChangeText={(value) => handleChangeText(value, \"name\")}\n                        placeholder=\"Titulo\"\n                        placeholderColor=\"#c4c3cb\"\n                        style={styles.loginFormTextInput}/>\n                    <TextInput\n                        onChangeText={(value) => handleChangeText(value, \"nickname\")}\n                        placeholder=\"Tu nombre y apellido\"\n                        placeholderColor=\"#c4c3cb\"\n                        style={styles.loginFormTextInput}/>\n                    <TextInput\n                        onChangeText={(value) => handleChangeText(value, \"description\")}\n                        placeholder=\"Escribe o pega la información aquí\" placeholderColor=\"#c4c3cb\"\n                        style={styles.loginFormTextInput}\n                        multiline={true}\n                    />\n                    <TextInput\n                        onChangeText={(value) => handleChangeText(value, \"tags\")}\n                        placeholder=\"Tags (separados por comas)\" placeholderColor=\"#c4c3cb\"\n                        style={styles.loginFormTextInput}\n                    />\n\n                    <Button\n                        buttonStyle={{\n                            backgroundColor: '#00ADC7',\n                        }}\n                        onPress={\n                            () => {\n                                saveNewUser()\n                                navigation.navigate(\"Search\")\n                            }\n                        } title=\"Publicar\"/>\n\n                </View>\n            </View>\n        </KeyboardAvoidingView>\n    )\n}\nexport default EscribirArticulo"],"mappings":"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"},"metadata":{},"sourceType":"module"}