{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBqFzGeSbCdUPMGDv8TONyyJ4O_RRfk1sg\",\n  authDomain: \"goodsaludmental.firebaseapp.com\",\n  projectId: \"goodsaludmental\",\n  storageBucket: \"goodsaludmental.appspot.com\",\n  messagingSenderId: \"892144031733\",\n  appId: \"1:892144031733:web:6b3c1a7bd85602225f32bc\"\n};\nvar app;\n\nif (firebase.apps.length === 0) {\n  app = firebase.initializeApp(firebaseConfig);\n} else {\n  app = firebase.app();\n}\n\nvar db = app.firestore();\nvar auth = firebase.auth();\nexport { db, auth };\nexport var createUserDocument = function _callee(user, additionalData) {\n  var userRef, snapshot, email, displayName;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (user) {\n            _context.next = 2;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 2:\n          userRef = db.doc(\"users/\" + user.uid);\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(userRef.get());\n\n        case 5:\n          snapshot = _context.sent;\n\n          if (snapshot.exists) {\n            _context.next = 17;\n            break;\n          }\n\n          email = user.email;\n          displayName = additionalData.displayName;\n          _context.prev = 9;\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(userRef.set({\n            displayName: displayName,\n            email: email,\n            createdAt: new Date()\n          }));\n\n        case 12:\n          _context.next = 17;\n          break;\n\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](9);\n          console.log('Error in creating user', _context.t0);\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[9, 14]], Promise);\n};","map":{"version":3,"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","apps","length","initializeApp","db","firestore","auth","createUserDocument","user","additionalData","userRef","doc","uid","get","snapshot","exists","email","displayName","set","createdAt","Date","console","log"],"sources":["/Users/victorsalgado/Desktop/goodmental/firebase2.js"],"sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBqFzGeSbCdUPMGDv8TONyyJ4O_RRfk1sg\",\n    authDomain: \"goodsaludmental.firebaseapp.com\",\n    projectId: \"goodsaludmental\",\n    storageBucket: \"goodsaludmental.appspot.com\",\n    messagingSenderId: \"892144031733\",\n    appId: \"1:892144031733:web:6b3c1a7bd85602225f32bc\"\n  };\n\n\nlet app;\n\nif (firebase.apps.length === 0) {\n    app = firebase.initializeApp(firebaseConfig)\n} else {\n    app = firebase.app();\n}\n\nconst db = app.firestore();\nconst auth = firebase.auth();\n\nexport {db, auth};\nexport const createUserDocument = async (user, additionalData) => {\n    if (!user) return;\n\n    const userRef = db.doc(`users/${user.uid}`);\n\n    const snapshot = await userRef.get();\n\n    if (!snapshot.exists) {\n        const { email } = user;\n        const { displayName } = additionalData;\n\n        try {\n            await userRef.set({\n                displayName,\n                email,\n                createdAt: new Date(),\n            });\n        } catch (error) {\n            console.log('Error in creating user', error);\n        }\n    }\n};\n"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,qBAArB;AACA,OAAO,sBAAP;AACA,OAAO,2BAAP;AAEA,IAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,yCADW;EAEnBC,UAAU,EAAE,iCAFO;EAGnBC,SAAS,EAAE,iBAHQ;EAInBC,aAAa,EAAE,6BAJI;EAKnBC,iBAAiB,EAAE,cALA;EAMnBC,KAAK,EAAE;AANY,CAAvB;AAUA,IAAIC,GAAJ;;AAEA,IAAIR,QAAQ,CAACS,IAAT,CAAcC,MAAd,KAAyB,CAA7B,EAAgC;EAC5BF,GAAG,GAAGR,QAAQ,CAACW,aAAT,CAAuBV,cAAvB,CAAN;AACH,CAFD,MAEO;EACHO,GAAG,GAAGR,QAAQ,CAACQ,GAAT,EAAN;AACH;;AAED,IAAMI,EAAE,GAAGJ,GAAG,CAACK,SAAJ,EAAX;AACA,IAAMC,IAAI,GAAGd,QAAQ,CAACc,IAAT,EAAb;AAEA,SAAQF,EAAR,EAAYE,IAAZ;AACA,OAAO,IAAMC,kBAAkB,GAAG,iBAAOC,IAAP,EAAaC,cAAb;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA,IACzBD,IADyB;YAAA;YAAA;UAAA;;UAAA;;QAAA;UAGxBE,OAHwB,GAGdN,EAAE,CAACO,GAAH,YAAgBH,IAAI,CAACI,GAArB,CAHc;UAAA;UAAA,iCAKPF,OAAO,CAACG,GAAR,EALO;;QAAA;UAKxBC,QALwB;;UAAA,IAOzBA,QAAQ,CAACC,MAPgB;YAAA;YAAA;UAAA;;UAQlBC,KARkB,GAQRR,IARQ,CAQlBQ,KARkB;UASlBC,WATkB,GASFR,cATE,CASlBQ,WATkB;UAAA;UAAA;UAAA,iCAYhBP,OAAO,CAACQ,GAAR,CAAY;YACdD,WAAW,EAAXA,WADc;YAEdD,KAAK,EAALA,KAFc;YAGdG,SAAS,EAAE,IAAIC,IAAJ;UAHG,CAAZ,CAZgB;;QAAA;UAAA;UAAA;;QAAA;UAAA;UAAA;UAkBtBC,OAAO,CAACC,GAAR,CAAY,wBAAZ;;QAlBsB;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAA3B"},"metadata":{},"sourceType":"module"}